# This is the Apache configuration for running the tool in Docker.
# We use Apache settings like this in production, but this is a cut-down
# version for testing.

ServerName localhost

<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    
    DocumentRoot /var/ifarchive/htdocs

    ErrorLog /dev/stdout
    CustomLog /dev/stdout combined

    ScriptAlias /cgi-bin/ /var/ifarchive/cgi-bin/
    #WSGIScriptAlias /admin /var/ifarchive/wsgi-bin/admin.wsgi

    <Directory "/var/ifarchive/htdocs/">
       Order allow,deny
       Allow from all
       Require all granted
       Options +Indexes +FollowSymLinks +MultiViews
       DirectoryIndex index.html index.htm
       ReadmeName /misc/autoindex-footer.html
    </Directory>

    # The Archive content directory (and subdirs) have custom auto-indexing.
    <Directory "/var/ifarchive/htdocs/if-archive/">
        HeaderName Index
        ReadmeName /misc/autoindex-footer.html
        IndexOptions FancyIndexing HTMLTable SuppressDescription SuppressIcon IgnoreCase FoldersFirst
    </Directory>

    # The "Index" files are presumed to be UTF-8.
    <Files Index>
        ForceType text/plain;charset="UTF-8"
    </Files>

    <Directory "/var/ifarchive/cgi-bin/">
        Options +ExecCGI
        SetHandler cgi-script
        Order allow,deny
        Allow from all
        Require all granted
        SetEnv LANG en_US.UTF-8
    </Directory>

    <Directory "/var/ifarchive/wsgi-bin/">
        Require all granted
        SetEnv LANG en_US.UTF-8
    </Directory>
</VirtualHost>

#WSGIPythonPath /var/ifarchive/wsgi-bin
